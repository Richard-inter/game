namespace clawMachine;

enum MessageType : byte {
  StartClawGameReq = 0,
  StartClawGameResp = 1,
  AddTouchedItemRecordReq = 2,
  AddTouchedItemRecordResp = 3,
  GetPlayerInfoWsReq = 4,
  GetPlayerInfoWsResp = 5,
  SpawnItemReq = 6,
  SpawnItemResp = 7,
  ErrorResp = 100
}

/***************
 * Requests
 ***************/
table StartClawGameReq {
  player_id:long;
  machine_id:long;
}

table AddTouchedItemRecordReq {
  game_id:long;
  item_id:long;
  catched:bool;
}

table GetPlayerInfoWsReq {
  player_id:long;
}

table SpawnItemReq {
  machine_id:long;
}

/***************
 * Responses
 ***************/
table ClawResult {
  item_id:long;
  catched:bool;
}

table StartClawGameResp {
  game_id:long;
  results:[ClawResult];
}

table AddTouchedItemRecordResp {
  game_id:long;
  item_id:long;
  catched:bool;
}

table GetPlayerInfoWsResp {
  player_id:long;
  username:string;
  coin:long;
  diamond:long;
}

table SpawnItemResp {
  items:[long];
}

/***************
 * Error
 ***************/
table ErrorResp {
  code:int;
  message:string;
}

/***************
 * Envelope
 ***************/
table Envelope {
  type:MessageType;
  payload:[ubyte];
}

root_type Envelope;
